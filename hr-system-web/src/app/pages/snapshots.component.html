<section class="page">
  <h2>System Snapshots</h2>
  <p class="error" *ngIf="error">{{ error }}</p>

  <div class="table-wrap" *ngIf="!loading; else loadingTpl">
    <table>
      <thead>
        <tr>
          <th>Time (UTC)</th>
          <th>Actor</th>
          <th>Source</th>
          <th>Action</th>
          <th>Category</th>
          <th>Related ID</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of snapshots">
          <td>{{ item.createdAtUtc | date:'medium' }}</td>
          <td>{{ item.actorName }}</td>
          <td>{{ item.source }}</td>
          <td>{{ item.action }}</td>
          <td>{{ item.category }}</td>
          <td>{{ item.relatedEntityId ?? '-' }}</td>
          <td>{{ item.details }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #loadingTpl>
    <p>Loading snapshots...</p>
  </ng-template>
</section>
